Это масштабная работа, охватывающая полный курс теории баз данных. Ниже приведен подробный разбор всех вопросов по группам.

---

# Группа 1. Введение в информационные системы (ИС) и СУБД

### 1. Понятие информационной системы (ИС)
**Информационная система** — это организационно-техническая система, предназначенная для сбора, хранения, обработки, поиска и выдачи информации. 
**Компоненты ИС:**
*   **Техническое обеспечение:** серверы, компьютеры, сети.
*   **Программное обеспечение:** ОС, СУБД, прикладное ПО.
*   **Информационное обеспечение:** базы данных, классификаторы, метаданные.
*   **Организационно-методическое обеспечение:** инструкции, регламенты.
*   **Персонал:** администраторы, программисты, пользователи.

### 2. Предпосылки возникновения ИС и БД
До появления БД данные хранились в **файловых системах**. Основные проблемы, вызвавшие переход к БД:
1.  **Избыточность данных:** информация дублировалась в разных файлах.
2.  **Непротиворечивость:** обновление данных в одном месте не приводило к обновлению в другом.
3.  **Зависимость данных от программ:** изменение структуры файла требовало переписки кода.
4.  **Сложность доступа:** для каждого нового запроса нужно было писать новую программу.

### 3. Функции и области применения ИС
**Функции:** ввод, фильтрация, сортировка, хранение, агрегация и вывод данных.
**Области:** 
*   **ERP (Enterprise Resource Planning):** управление ресурсами предприятия.
*   **CRM (Customer Relationship Management):** работа с клиентами.
*   **BI (Business Intelligence):** аналитика больших данных.
*   **ГИС:** геоинформационные системы.

### 4. Банк данных и его компоненты
**Банк данных (БнД)** — это система специальным образом организованных данных (БД) и программных, технических и языковых средств.
**Состав:**
1.  **База данных (БД):** само хранилище данных.
2.  **СУБД:** комплекс программ для управления БД.
3.  **Языковые средства:** SQL (DDL, DML).
4.  **Администратор БД:** человек/отдел, отвечающий за работоспособность.

### 5. Типовая организация современной СУБД
Современная СУБД состоит из:
*   **Диспетчер запросов:** парсит и оптимизирует SQL.
*   **Менеджер транзакций:** обеспечивает ACID (атомарность и пр.).
*   **Менеджер буфера:** кэширует данные в оперативной памяти.
*   **Менеджер памяти/хранилища:** записывает данные на диск.
*   **Каталог (Словарь данных):** хранит метаданные (структуры таблиц).

### 6. Основные функции СУБД
1.  Управление данными во внешней памяти.
2.  Управление буферами оперативной памяти.
3.  Управление транзакциями (атомарность, надежность).
4.  Журнализация изменений (восстановление после сбоев).
5.  Обеспечение безопасности и целостности данных.

---

# Группа 2. Модели представления данных

### 1. Классификация моделей
1.  **Иерархическая** (структура — дерево).
2.  **Сетевая** (структура — граф).
3.  **Реляционная** (структура — плоские таблицы).
4.  **Объектно-ориентированная** (данные как объекты классов).
5.  **NoSQL** (документные, графовые, ключ-значение).

### 2. Сетевая модель
Основана на графах. Запись может иметь несколько владельцев.
*   **Достоинства:** высокая скорость поиска по сложным связям, отсутствие дублирования.
*   **Недостатки:** невероятная сложность проектирования и навигации; жесткость структуры.

### 3. Иерархическая модель
Основана на подчинении "родитель-потомок".
*   **Достоинства:** простота для древовидных данных (файловая система), высокая скорость при запросах "сверху вниз".
*   **Недостатки:** нельзя реализовать связь "многие-ко-многим", сложность доступа к элементам нижнего уровня без прохода по всей ветке.

### 4. Реляционная модель
Данные в виде таблиц (отношений).
*   **Достоинства:** гибкость, простота (таблицы понятны всем), мощный язык запросов SQL, независимость данных.
*   **Недостатки:** относительно низкая скорость при огромном количестве соединений (JOIN).

---

# Группа 3. Теоретические основы реляционной модели

### 1. Общие понятия: Ключи и Индексы
*   **Первичный ключ (Primary Key):** поле или набор полей, уникально идентифицирующее строку. Не может быть NULL.
*   **Внешний ключ (Foreign Key):** поле, ссылающееся на первичный ключ другой таблицы. Обеспечивает связь.
*   **Индексы:** скрытые структуры (обычно B-деревья), ускоряющие поиск данных ценой замедления записи.

### 2. Свойства отношений
*   Нет двух одинаковых кортежей (строк).
*   Порядок строк и столбцов не важен.
*   Все значения атрибутов атомарны (неделимы).
*   Каждый столбец имеет уникальное имя в рамках таблицы.

### 3. Реляционная алгебра: теоретико-множественные операции
1.  **Объединение ($\cup$):** строки из обеих таблиц (без дублей).
2.  **Пересечение ($\cap$):** только общие строки.
3.  **Разность ($- \setminus$):** строки из первой, которых нет во второй.
4.  **Декартово произведение ($\times$):** каждая строка первой таблицы соединяется с каждой строкой второй.

### 4. Реляционная алгебра: специальные операции
1.  **Выборка (Селекция, $\sigma$):** фильтрация строк по условию (SQL `WHERE`).
2.  **Проекция ($\pi$):** выбор определенных столбцов (SQL `SELECT col1, col2`).
3.  **Соединение ($\bowtie$):** объединение таблиц по условию (SQL `JOIN`).
4.  **Деление ($\div$):** поиск записей, связанных со всеми записями другой таблицы.

### 5. Реляционное исчисление
В отличие от алгебры (процедурной — "как сделать"), исчисление является **декларативным** ("что нужно получить"). Оно основано на логике предикатов. Бывает двух типов: исчисление кортежей и исчисление доменов.

---

# Группа 4. Проектирование баз данных

### 1. Методология проектирования
Проходит путь от абстракции к физическому файлу:
Инфологический уровень -> Логический уровень -> Физический уровень.

### 2. Концептуальное (Инфологическое) проектирование
Создание модели, не привязанной к конкретной СУБД. Главный инструмент — **ER-диаграммы** (Сущность-Связь). Описываются объекты (студент), их свойства (имя) и связи (учится в группе).

### 3. Логическое проектирование
Преобразование ER-диаграммы в реляционные таблицы. Здесь определяются ключи, типы данных и проводится нормализация.

### 4. Требования нормальных форм (Нормализация)
Процесс удаления аномалий и дублирования.
*   **1НФ:** Атомарность значений (нет списков в ячейке).
*   **2НФ:** 1НФ + полная функциональная зависимость от ключа (нет зависимости от части составного ключа).
*   **3НФ:** 2НФ + нет транзитивных зависимостей (неключевое поле зависит только от ключа, а не от другого неключевого поля).
*   **НФБК (Бойса-Кодда):** более строгая версия 3НФ.

### 5. Физическое проектирование
Определение способов хранения на диске: выбор СУБД, настройка индексов, кластеризация, партиционирование (разделение таблиц на части) и выделение дискового пространства.

---

# Группа 5. Целостность, транзакции и механизмы СУБД

### 1. Ссылочная целостность
Гарантия того, что внешний ключ всегда указывает на существующий первичный ключ.
**Механизмы:**
*   `ON DELETE CASCADE` (удалить зависимые записи).
*   `SET NULL` (обнулить поле).
*   `RESTRICT / NO ACTION` (запретить удаление родителя).

### 2. Транзакции и целостность
**Транзакция** — логическая единица работы. Должна удовлетворять **ACID**:
*   **A**tomicity (Атомарность): всё или ничего.
*   **C**onsistency (Согласованность): из одного валидного состояния в другое.
*   **I**solation (Изолированность): параллельные транзакции не мешают друг другу.
*   **D**urability (Долговечность): если закоммичено — данные сохранены.

### 3. Уровни изолированности (от слабого к сильному)
1.  **Read Uncommitted:** можно читать "грязные" (незавершенные) данные.
2.  **Read Committed:** читаются только зафиксированные данные (защита от грязного чтения).
3.  **Repeatable Read:** данные, прочитанные один раз, не изменятся до конца транзакции.
4.  **Serializable:** полная имитация последовательной работы (самый медленный).

### 4. Структура внешней памяти
БД хранится в виде **файлов данных**, состоящих из **страниц** (обычно 8 КБ). Несколько страниц образуют **экстенты**. СУБД считывает данные не побайтово, а страницами.

### 5. Журнализация изменений
**WAL (Write-Ahead Logging):** сначала запись об изменении вносится в лог (журнал) на диске, и только потом обновляются данные в памяти. Это позволяет восстановить БД при выключении питания.

### 6. Сериализация транзакций
Это построение такого графика выполнения транзакций, чтобы результат был эквивалентен их последовательному выполнению.
**Методы:** блокировки (locks) и временные метки (timestamps).

### 7. Синхронизационные захваты (Блокировки) и Тупики
*   **S-lock (Shared):** для чтения (многие могут держать одновременно).
*   **X-lock (Exclusive):** для записи (только один владелец).
**Тупик (Deadlock):** Транзакция А ждет ресурс, занятый Б, а Б ждет ресурс, занятый А. Решается откатом одной из транзакций.

### 8. Метод временных меток
Каждой транзакции присваивается уникальное время старта. Если транзакция пытается обратиться к данным, которые уже изменены "более молодой" транзакцией, она откатывается. Позволяет избежать блокировок.

---

# Группа 6. Основы SQL и выборка данных (DQL)

### 1. Назначение и отличия SQL
SQL — декларативный язык. Мы описываем **результат**, а не алгоритм его получения (в отличие от C++ или Java).
**Функции:** DDL (структура), DML (данные), DCL (права), TCL (транзакции).

### 2. Типы данных SQL
`INT`, `VARCHAR(N)`, `TEXT`, `DATE`, `TIMESTAMP`, `DECIMAL`, `BOOLEAN`.

### 3. Синтаксис SELECT
```sql
SELECT столбец1, столбец2 
FROM таблица 
WHERE условие 
ORDER BY столбец [ASC|DESC];
```

### 4. Операторы IN, BETWEEN, LIKE, IS NULL
*   `IN (1, 2, 3)`: входит в список.
*   `BETWEEN 10 AND 20`: входит в диапазон.
*   `LIKE 'А%'`: поиск по маске (начинается на А). `%` — любая строка, `_` — один символ.
*   `IS NULL`: проверка на пустоту.

### 5. Групповые функции
`COUNT`, `SUM`, `AVG`, `MIN`, `MAX`.
Пример: `SELECT department, AVG(salary) FROM employees GROUP BY department;`

### 6. Вложенные подзапросы и EXISTS
`EXISTS` возвращает истину, если подзапрос вернул хотя бы одну строку. Обычно работает быстрее, чем `IN` для больших объемов данных.

### 7. Связанные (коррелированные) подзапросы
Подзапрос, который обращается к полям внешней таблицы. Выполняется по одному разу для каждой строки внешнего запроса.

### 8. Оператор UNION
Объединяет результаты двух SELECT. 
**Условия:** одинаковое количество столбцов и совместимые типы данных. `UNION` убирает дубли, `UNION ALL` — нет.

### 9. Виды JOIN
*   **INNER JOIN:** только те записи, что есть в обеих таблицах.
*   **LEFT JOIN:** все из левой + совпадения из правой (остальное NULL).
*   **RIGHT JOIN:** все из правой + совпадения из левой.
*   **FULL JOIN:** все записи из обеих.

---

# Группа 7. Манипулирование данными (DML) и оптимизация

### 1. INSERT, UPDATE, DELETE с подзапросами
```sql
INSERT INTO arch_users SELECT * FROM users WHERE active = 0;
UPDATE products SET price = price * 1.1 WHERE category_id IN (SELECT id FROM categories WHERE name = 'Lux');
DELETE FROM orders WHERE user_id NOT IN (SELECT id FROM users);
```

### 2. Встроенные функции
Строковые (`UPPER`, `SUBSTR`), математические (`ROUND`, `ABS`), системные (`NOW()`, `USER()`).

### 3. Оператор EXPLAIN
Показывает **план выполнения** запроса: какие индексы используются, сколько строк будет просмотрено. Помогает найти "узкие места".

### 4. Способы оптимизации
1.  Создание индексов на поля, участвующие в `WHERE` и `JOIN`.
2.  Отказ от `SELECT *` (выбирать только нужные поля).
3.  Денормализация (в редких случаях для скорости чтения).
4.  Использование кэширования.

---

# Группа 8. Определение структуры (DDL) и программирование

### 1. Команды работы с таблицами
*   `CREATE TABLE table_name (id INT PRIMARY KEY, name VARCHAR(50));`
*   `DROP TABLE table_name;`
*   `ALTER TABLE table_name ADD COLUMN age INT;`

### 2. Индексы
*   Создание: `CREATE INDEX idx_name ON table(column);`
*   Удаление: `DROP INDEX idx_name;`

### 3. Представления (Views)
"Виртуальная таблица", которая является сохраненным запросом. Позволяет скрыть сложность структуры и ограничить доступ к полям.

### 4. Триггеры
Процедуры, которые запускаются автоматически при `INSERT`, `UPDATE` или `DELETE`. Используются для сложной проверки бизнес-логики.

### 5. Хранимые процедуры и функции
Код, хранящийся на сервере БД. 
*   **Процедура** выполняет действия (не обязательно возвращает значение).
*   **Функция** всегда возвращает значение и может использоваться внутри SELECT.

---

# Группа 9. Архитектура и администрирование

### 1. Архитектура клиент-сервер
*   **Двухзвенная:** Клиент (ПО) напрямую подключается к серверу БД.
*   **Трехзвенная:** Клиент (Браузер) -> Сервер приложений (PHP/Python) -> Сервер БД. Это безопаснее и лучше масштабируется.

### 2. Пользователи и привилегии (DCL)
*   `CREATE USER 'ivan'@'localhost' IDENTIFIED BY 'password';`
*   `GRANT SELECT, INSERT ON db_name.* TO 'ivan';`

### 3. Точки сохранения (Savepoints)
Позволяют откатить транзакцию не полностью, а до определенной метки.

### 4. Инструменты
`phpMyAdmin`, `DBeaver`, `pgAdmin`, `MySQL Workbench`, консольные утилиты.

### 5. Transact-SQL (T-SQL)
Расширение SQL от Microsoft (MS SQL Server), добавляющее переменные, циклы `WHILE`, условия `IF...ELSE` и обработку исключений `TRY...CATCH`.

### 6. PHP и БД
Используются расширения **PDO** (универсальное) или **mysqli**.
Основные этапы:
1. Соединение.
2. Подготовка запроса (Prepared Statements для защиты от SQL-инъекций).
3. Выполнение.
4. Получение результата (`fetch`).
5. Закрытие соединения.
